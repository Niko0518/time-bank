        // [v7.15.1] é‡æ–°è®¾è®¡çš„ä½™é¢è¯¦æƒ…å¼¹çª— - å‚è€ƒå±å¹•/ç¡çœ æ—¶é—´å¡ç‰‡é£æ ¼
        function showFinanceDetailCombinedModal() {
            // è·å–æ•°æ®
            const balanceData = getLast7DaysBalanceData();
            const totalDeposit = financeStats.totalDepositInterest;
            const totalLoan = financeStats.totalLoanInterest;
            const netInterest = totalDeposit - totalLoan;
            const todayInterest = getExpectedTodayInterest();
            
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            const yesterdayStr = getLocalDateString(yesterday);
            const yesterdayLedger = interestLedger[yesterdayStr];
            
            const maxBalance = Math.max(...balanceData.map(d => Math.abs(d.balance)), 1);
            
            // æ„å»ºè¿‘7å¤©æ°´å¹³æ¡å½¢å›¾ HTMLï¼ˆå‚è€ƒç¡çœ å¡ç‰‡æ¡å½¢å›¾é£æ ¼ï¼‰
            let chartHtml = '<div class="finance-detail-section">';
            chartHtml += '<div class="finance-detail-title">ğŸ“Š è¿‘7å¤©ä½™é¢</div>';
            chartHtml += '<div class="finance-bar-chart">';
            
            const dayLabels = ['æ˜¨å¤©', 'å‰å¤©', '3å¤©å‰', '4å¤©å‰', '5å¤©å‰', '6å¤©å‰', '7å¤©å‰'];
            balanceData.slice().reverse().forEach((data, index) => {
                const widthPercent = Math.max(8, (Math.abs(data.balance) / maxBalance) * 85);
                const isPositive = data.balance >= 0;
                const valueText = formatHoursShort(data.balance);
                const dayLabel = dayLabels[index] || `${index + 1}å¤©å‰`;
                
                chartHtml += `
                    <div class="finance-bar-row">
                        <div class="finance-bar-label">${dayLabel}</div>
                        <div class="finance-bar-container">
                            <div class="finance-bar ${isPositive ? 'positive' : 'negative'}" style="width: ${widthPercent}%;">
                                <span class="finance-bar-text">${valueText}</span>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            chartHtml += '</div></div>';
            
            // åˆ©æ¯ç»Ÿè®¡åŒºåŸŸï¼ˆåœ†è§’å¡ç‰‡é£æ ¼ï¼Œå‚è€ƒå±å¹•æ—¶é—´ï¼‰
            const interestHtml = `
                <div class="finance-detail-section">
                    <div class="finance-detail-title">ğŸ’° åˆ©æ¯ç»Ÿè®¡</div>
                    <div class="finance-stats-grid">
                        <div class="finance-stat-card positive">
                            <div class="finance-stat-label">ç´¯è®¡å­˜æ¬¾æ”¶ç›Š</div>
                            <div class="finance-stat-value">+${formatTime(totalDeposit)}</div>
                        </div>
                        <div class="finance-stat-card negative">
                            <div class="finance-stat-label">ç´¯è®¡è´·æ¬¾æ”¯å‡º</div>
                            <div class="finance-stat-value">-${formatTime(totalLoan)}</div>
                        </div>
                    </div>
                    <div class="finance-net-card ${netInterest >= 0 ? 'positive' : 'negative'}">
                        <span>ç´¯è®¡å‡€æ”¶ç›Š</span>
                        <span class="finance-net-value">${netInterest >= 0 ? '+' : ''}${formatTime(netInterest)}</span>
                    </div>
                </div>
            `;
            
            // ä»Šæ—¥åˆ©æ¯æ˜ç»†
            const todayDetailHtml = `
                <div class="finance-detail-section">
                    <div class="finance-detail-title">ğŸ“… ä»Šæ—¥åˆ©æ¯</div>
                    <div class="finance-today-card">
                        <div class="finance-today-row">
                            <span>é¢„è®¡ä»Šæ—¥åˆ©æ¯</span>
                            <span class="finance-today-value ${todayInterest >= 0 ? 'positive' : 'negative'}">${todayInterest >= 0 ? '+' : ''}${formatTime(todayInterest)}</span>
                        </div>
                        ${yesterdayLedger ? `
                        <div class="finance-today-row secondary">
                            <span>æ˜¨æ—¥å·²ç»“ç®—</span>
                            <span>${yesterdayLedger.interestAmount >= 0 ? '+' : ''}${formatTime(yesterdayLedger.interestAmount)}</span>
                        </div>
                        ` : ''}
                    </div>
                </div>
            `;
            
            // æœ¬å‘¨æ±‡æ€»ï¼ˆä¸‰åˆ—ç½‘æ ¼ï¼‰
            const weekEarned = balanceData.reduce((sum, d) => sum + d.earned, 0);
            const weekSpent = balanceData.reduce((sum, d) => sum + d.spent, 0);
            const weekNet = balanceData.reduce((sum, d) => sum + d.net, 0);
            
            const weekHtml = `
                <div class="finance-detail-section">
                    <div class="finance-detail-title">ğŸ“Š æœ¬å‘¨æ±‡æ€»</div>
                    <div class="finance-week-grid">
                        <div class="finance-week-item">
                            <div class="finance-week-label">è·å¾—</div>
                            <div class="finance-week-value positive">+${formatTime(weekEarned)}</div>
                        </div>
                        <div class="finance-week-item">
                            <div class="finance-week-label">æ¶ˆè´¹</div>
                            <div class="finance-week-value negative">-${formatTime(weekSpent)}</div>
                        </div>
                        <div class="finance-week-item">
                            <div class="finance-week-label">å‡€å€¼</div>
                            <div class="finance-week-value ${weekNet >= 0 ? 'positive' : 'negative'}">${weekNet >= 0 ? '+' : ''}${formatTime(weekNet)}</div>
                        </div>
                    </div>
                </div>
            `;
            
            // åˆ©ç‡è®¾ç½®ï¼ˆåº•éƒ¨åŒºåŸŸï¼‰
            const rateHtml = `
                <div class="finance-detail-section">
                    <div class="finance-detail-title">âš™ï¸ åˆ©ç‡è®¾ç½®</div>
                    <div class="finance-rate-card">
                        <div class="finance-rate-row">
                            <span class="finance-rate-label">ğŸ’° å­˜æ¬¾åˆ©ç‡</span>
                            <span class="finance-rate-value positive">${financeSettings.depositRate.toFixed(1)}%</span>
                        </div>
                        <div class="finance-rate-row">
                            <span class="finance-rate-label">ğŸ’¸ è´·æ¬¾åˆ©ç‡</span>
                            <span class="finance-rate-value negative">${financeSettings.loanRate.toFixed(1)}%</span>
                        </div>
                        <div class="finance-rate-hint">
                            æ¯æ—¥ ${financeSettings.settlementTime} ç»“ç®— Â· ç´¯è®¡è®¡æ¯ ${financeStats.interestDays} å¤©
                        </div>
                    </div>
                </div>
            `;
            
            // ç»„åˆå†…å®¹
            const content = `
                ${chartHtml}
                ${interestHtml}
                ${todayDetailHtml}
                ${weekHtml}
                ${rateHtml}
            `;
            
            showInfoModal('ä½™é¢è¯¦æƒ…', content);
        }
